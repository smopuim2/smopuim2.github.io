function md2html(s){
    let pat=[
        ['<','&lt;'],
        ['>','&gt;'],
        [/[^\S\n]{2,}$/gm,'<br>'],
        [/^[^\S\n]*#{1}[^\S\n]+(.*?)[^\S\n]*#*$/gm,'<h1>{{1}}</h1>'],
        [/^[^\S\n]*#{1}[^\S\n]+(.*?)[^\S\n]*#*$/gm,'<h1>{{1}}</h1>'],
        [/^[^\S\n]*#{2}[^\S\n]+(.*?)[^\S\n]*#*$/gm,'<h2>{{1}}</h2>'],
        [/^[^\S\n]*#{3}[^\S\n]+(.*?)[^\S\n]*#*$/gm,'<h3>{{1}}</h3>'],
        [/^[^\S\n]*#{4}[^\S\n]+(.*?)[^\S\n]*#*$/gm,'<h4>{{1}}</h4>'],
        [/^[^\S\n]*#{5}[^\S\n]+(.*?)[^\S\n]*#*$/gm,'<h5>{{1}}</h5>'],
        [/^[^\S\n]*#{6}[^\S\n]+(.*?)[^\S\n]*#*$/gm,'<h6>{{1}}</h6>'],
        [/(\*\*|__)(.+?)\1/gm,'<strong>{{2}}</strong>'],
        [/(\*|_)(.+?)\1/gm,'<em>{{2}}</em>'],
        [/~~(.+?)~~/gm,'<del>{{1}}</del>'],
        [/`(.+?)`/gm,'<code>{{1}}</code>'],
        [/!\[(.+?)\]\([^\S\n]*(.+?)[^\S\n]*"(.+?)"[^\S\n]*\)/gm,'<img src="{{2}}" alt="{{1}}" title="{{3}}">'],
        [/!\[(.+?)\]\([^\S\n]*(.+?)[^\S\n]*\)/gm,'<img src="{{2}}" alt="{{1}}">'],
        [/\[(.+?)\]\([^\S\n]*(.+?)[^\S\n]*"(.+?)"[^\S\n]*\)/gm,'<a href="{{2}}" title="{{3}}">{{1}}</a>'],
        [/\[(.+?)\]\([^\S\n]*(.+?)[^\S\n]*\)/gm,'<a href="{{2}}">{{1}}</a>'],
        [/^[^\S\n]*(\*{3,}|-{3,}|_{3,})[^\S\n]*$/gm,'<hr>'],
        [/\s+/gm,' ']
    ];
    for(let [i,j] of pat){
        s=s.replaceAll(i,
            (...k)=>
                j.replaceAll(/\{\{(\d+)\}\}/g,(x,y)=>k[Number(y)])
        );
    }
    return s;
}
